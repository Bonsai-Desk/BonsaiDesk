(this.webpackJsonpBonsaiUI=this.webpackJsonpBonsaiUI||[]).push([[0],{16:function(e,a,n){e.exports=n(38)},38:function(e,a,n){"use strict";n.r(a);var t=n(0),o=n.n(t),l=n(10),s=n.n(l),r=(n(8),n(39)),i=n(2),c=n(11),u=-1,d=0,p=1,b=2,g=3,m=5,f=function(e){var a;switch(e){case-1:a="unstarted";break;case 0:a="ended";break;case 1:a="playing";break;case 2:a="paused";break;case 3:a="buffering";break;case 5:a="cued";break;default:a="BAD SWITCH STATE"}return a},v=function(e){var a=new URLSearchParams(e.location.search),n=parseInt(a.get("x")),l=parseInt(a.get("y")),s={width:n&&l?n:window.innerWidth,height:n&&l?l:window.innerHeight,playerVars:{autoplay:0,controls:0,disablekb:1,rel:0}},v=Object(r.d)(),y="youtube_test"===e.location.pathname.split("/")[1],h=e.match.params,E=h.id,w=h.timeStamp,k=Object(t.useState)(null),S=Object(i.a)(k,2),O=S[0],x=S[1],C=Object(t.useState)(!1),j=Object(i.a)(C,2),A=j[0],D=j[1],M=Object(t.useState)(!1),T=Object(i.a)(M,2),I=T[0],L=T[1],P=Object(t.useState)(!1),N=Object(i.a)(P,2),B=N[0],U=N[1],V=Object(t.useState)(!1),R=Object(i.a)(V,2),J=R[0],Y=R[1],_=Object(t.useCallback)((function(e){"READY"!==e&&L(!1),console.log("POST "+e),y||window.vuplex.postMessage({type:"stateChange",message:e,current_time:O.getCurrentTime()})}),[O,y]),H=Object(t.useCallback)((function(e){if(null!=O){if(I&&Math.abs(O.getCurrentTime()-e)<.01)return console.log("bonsai: ready-up called while ready"),void _("READY");var a=O.getPlayerState();A?(console.log("bonsai: readying up from "+f(a)+" -> "+e),W(O),a===b&&O.playVideo(),O.seekTo(e,!0),O.pauseVideo(),O.unMute()):console.log("bonsai: ignoring attempt to ready-up before init")}else console.log("bonsai: ignoring attempt to ready up while player is null")}),[A,O,_,I]),W=function(e){console.log("bonsai: prepare to ready up"),L(!1),U(!0),e.mute()};Object(t.useEffect)((function(){if(null!=O&&!y){var e=function(e){var a=JSON.parse(e.data);if("video"===a.type)switch(console.log(e.data),a.command){case"play":console.log("COMMAND: play"),O.playVideo();break;case"pause":console.log("COMMAND: pause"),O.pauseVideo();break;case"readyUp":console.log("COMMAND: readyUp"),H(a.timeStamp);break;default:console.log("command: not handled (video) "+e.data)}};return window.vuplex.addEventListener("message",e),function(){window.vuplex.removeEventListener("message",e)}}}),[E,O,y,H]),Object(t.useEffect)((function(){console.log("bonsai: add ping interval");var e=setInterval((function(){var e=0;null!=O&&null!=O.getCurrentTime()&&(e=O.getCurrentTime()),y||window.vuplex.postMessage({type:"infoCurrentTime",current_time:e})}),100);return function(){console.log("bonsai: remove ping interval"),clearInterval(e)}}),[E,O,y]);return o.a.createElement("div",null,y?o.a.createElement("div",null,o.a.createElement("p",{onClick:function(){v.push("/home")}},"home")," ",o.a.createElement("p",{onClick:function(){H(40)}},"ready up")):"",o.a.createElement(c.a,{opts:s,onReady:function(e){var a=e.target;x(a),W(a),a.loadVideoById(E,parseFloat(w))},onError:function(e){console.log("bonsai youtube error: "+e)},onStateChange:function(e){switch(e.data){case m:console.log("bonsai: "+f(O.getPlayerState()));break;case u:console.log("bonsai: "+f(O.getPlayerState())+" "+O.getCurrentTime());break;case p:A?B?console.log("bonsai: while readying -> play"):(J?console.log("bonsai: playing after buffer"):console.log("bonsai: playing"),_("PLAYING")):O.pauseVideo(),J&&Y(!1);break;case b:A?J?B&&!I?(console.log("bonsai: ready (pause after buffer)"),L(!0),U(!1),_("READY")):(console.log("bonsai: paused after buffering"),_("PAUSED")):B?console.log("bonsai: while readying -> paused"):(console.log("bonsai: paused"),_("PAUSED")):(console.log("bonsai: init complete"),O.seekTo(w,!0),O.unMute(),D(!0),L(!0),U(!1),_("READY")),J&&Y(!1);break;case g:B?console.log("bonsai: while readying -> buffering"):console.log("bonsai: buffering"),Y(!0);break;case d:console.log("bonsai: "+f(O.getPlayerState())),_("ENDED");break;default:console.log("bonsai error: did not handle state change "+e.data)}}}))},y=function(){console.log("Boot");var e=Object(r.d)(),a=function(a){var n=JSON.parse(a.data);if("nav"===n.type)switch(n.command){case"push":console.log("command: nav "+n.path),e.push(n.path);break;default:console.log("command: not handled (navListeners) "+JSON.stringify(n))}};return null!=window.vuplex?(console.log("bonsai: vuplex is not null -> navListeners"),window.vuplex.addEventListener("message",a)):(console.log("bonsai: vuplex is null"),window.addEventListener("vuplexready",(function(e){console.log("bonsai: vuplexready -> navListeners"),window.vuplex.addEventListener("message",a)}))),o.a.createElement("div",null,"Boot",o.a.createElement("p",{onClick:function(){e.push("/youtube_test/qEfPBt9dU60/19.02890180001912?x=480&y=360")}},"test video"))},h=function(){return o.a.createElement("div",null,"Home")};var E=function(){return console.log("App"),o.a.createElement(r.a,null,o.a.createElement("div",{className:"bg-gray-800 h-screen text-green-400"},o.a.createElement(r.c,null,o.a.createElement(r.b,{exact:!0,path:"/home",component:h}),o.a.createElement(r.b,{exact:!0,path:"/youtube/:id/:timeStamp",component:v}),o.a.createElement(r.b,{exact:!0,path:"/youtube_test/:id/:timeStamp",component:v}),o.a.createElement(r.b,{path:"/",component:y}))))};s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root"))},8:function(e,a,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.24177784.chunk.js.map