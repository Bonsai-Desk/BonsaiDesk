(this.webpackJsonpBonsaiUI=this.webpackJsonpBonsaiUI||[]).push([[0],{103:function(e,n,t){},104:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(1),o=t.n(a),s=t(36),i=t.n(s),l=(t(70),t(7)),r=t(31),d=t(10),u=t(55),b=-1,j=0,h=1,p=2,x=3,g=5,f=function(e){var n;switch(e){case-1:n="unstarted";break;case 0:n="ended";break;case 1:n="playing";break;case 2:n="paused";break;case 3:n="buffering";break;case 5:n="cued";break;default:n="BAD SWITCH STATE"}return n},O=function(e){var n=new URLSearchParams(e.location.search),t=parseInt(n.get("x")),o=parseInt(n.get("y")),s={width:t&&o?t:window.innerWidth,height:t&&o?o:window.innerHeight,playerVars:{autoplay:0,controls:0,disablekb:1,rel:0}},i=Object(l.g)(),r="youtube_test"===e.location.pathname.split("/")[1],O=e.match.params,m=O.id,v=O.timeStamp,w=Object(a.useState)(null),y=Object(d.a)(w,2),k=y[0],C=y[1],N=Object(a.useState)(!1),S=Object(d.a)(N,2),E=S[0],M=S[1],D=Object(a.useState)(!1),T=Object(d.a)(D,2),A=T[0],J=T[1],I=Object(a.useState)(!1),P=Object(d.a)(I,2),L=P[0],U=P[1],B=Object(a.useState)(!1),V=Object(d.a)(B,2),H=V[0],R=V[1],_=Object(a.useCallback)((function(e){"READY"!==e&&J(!1),console.log("POST "+e),r||window.vuplex.postMessage({type:"stateChange",message:e,current_time:k.getCurrentTime()})}),[k,r]),Y=Object(a.useCallback)((function(e){if(null!=k){if(A&&Math.abs(k.getCurrentTime()-e)<.01)return console.log("bonsai: ready-up called while ready"),void _("READY");var n=k.getPlayerState();E?(console.log("bonsai: readying up from "+f(n)+" -> "+e),W(k),n===p&&k.playVideo(),k.seekTo(e,!0),k.pauseVideo(),k.unMute()):console.log("bonsai: ignoring attempt to ready-up before init")}else console.log("bonsai: ignoring attempt to ready up while player is null")}),[E,k,_,A]),W=function(e){console.log("bonsai: prepare to ready up"),J(!1),U(!0),e.mute()};Object(a.useEffect)((function(){if(null!=k&&!r){var e=function(e){var n=JSON.parse(e.data);if("video"===n.type)switch(console.log(e.data),n.command){case"play":console.log("COMMAND: play"),k.playVideo();break;case"pause":console.log("COMMAND: pause"),k.pauseVideo();break;case"readyUp":console.log("COMMAND: readyUp"),Y(n.timeStamp);break;default:console.log("command: not handled (video) "+e.data)}};return window.vuplex.addEventListener("message",e),function(){window.vuplex.removeEventListener("message",e)}}}),[m,k,r,Y]),Object(a.useEffect)((function(){console.log("bonsai: add ping interval");var e=setInterval((function(){var e=0;null!=k&&null!=k.getCurrentTime()&&(e=k.getCurrentTime()),r||window.vuplex.postMessage({type:"infoCurrentTime",current_time:e})}),100);return function(){console.log("bonsai: remove ping interval"),clearInterval(e)}}),[m,k,r]);return Object(c.jsxs)("div",{children:[r?Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{onClick:function(){i.push("/home")},children:"home"})," ",Object(c.jsx)("p",{onClick:function(){Y(40)},children:"ready up"})]}):"",Object(c.jsx)(u.a,{opts:s,onReady:function(e){var n=e.target;C(n),W(n),n.loadVideoById(m,parseFloat(v))},onError:function(e){console.log("bonsai youtube error: "+e)},onStateChange:function(e){switch(e.data){case g:console.log("bonsai: "+f(k.getPlayerState()));break;case b:console.log("bonsai: "+f(k.getPlayerState())+" "+k.getCurrentTime());break;case h:E?L?console.log("bonsai: while readying -> play"):(H?console.log("bonsai: playing after buffer"):console.log("bonsai: playing"),_("PLAYING")):k.pauseVideo(),H&&R(!1);break;case p:E?H?L&&!A?(console.log("bonsai: ready (pause after buffer)"),J(!0),U(!1),_("READY")):(console.log("bonsai: paused after buffering"),_("PAUSED")):L?console.log("bonsai: while readying -> paused"):(console.log("bonsai: paused"),_("PAUSED")):(console.log("bonsai: init complete"),k.seekTo(v,!0),k.unMute(),M(!0),J(!0),U(!1),_("READY")),H&&R(!1);break;case x:L?console.log("bonsai: while readying -> buffering"):console.log("bonsai: buffering"),R(!0);break;case j:console.log("bonsai: "+f(k.getPlayerState())),_("ENDED");break;default:console.log("bonsai error: did not handle state change "+e.data)}}})]})},m=t(32),v=t(41),w=t(106),y=t(59);var k=function(){var e=Object(v.useSpring)((function(){return{x:0,y:0,config:{mass:1,tension:400,friction:5}}})),n=Object(d.a)(e,2),t=n[0],a=t.x,o=t.y,s=n[1],i=Object(y.a)((function(e){var n=e.down,t=Object(d.a)(e.movement,2),c=t[0],a=t[1];s({x:n?c:0,y:n?a:0})}));return Object(c.jsx)("div",{className:"h-screen w-full flex flex-wrap content-center justify-center",children:Object(c.jsx)(w.animated.div,Object(m.a)(Object(m.a)({},i()),{},{className:"bg-red-400 h-10 w-10 rounded-lg",style:{x:a,y:o}}))})},C=t(61),N=t.n(C),S=function(){var e={url:"https://www.twitch.tv/hamletva",width:window.innerWidth,height:window.innerHeight};return Object(c.jsx)(N.a,Object(m.a)(Object(m.a)({},e),{},{onProgress:function(e){var n=e.played,t=e.loaded,c=e.playedSeconds,a=e.loadedSeconds;console.log(n,t,c,a)}}))},E=(t(103),t(39));function M(){Object(E.postJson)({Type:"event",Message:"mouseDown"})}function D(){Object(E.postJson)({Type:"event",Message:"mouseUp"})}function T(){Object(E.postJson)({Type:"event",Message:"hover"})}function A(e){return Object(c.jsx)("div",{onMouseDown:M,onMouseUp:D,onMouseEnter:T,children:e.children})}function J(e){var n=e.selected,t=e.handleClick,a=n?"rounded bg-blue-700 text-white px-3 py-2 cursor-pointer":"rounded hover:bg-gray-800 active:bg-gray-900 hover:text-white px-3 py-2 cursor-pointer";return Object(c.jsx)(A,{children:Object(c.jsx)("div",{className:a,onClick:t,children:e.children})})}function I(e){return Object(c.jsx)("div",{className:"space-y-1 px-2 h-full overflow-auto",children:e.children})}function P(e){return Object(c.jsx)("div",{className:"text-white font-bold text-xl px-5 pt-5 pb-2",children:e.children})}function L(e){var n=e.handleClick,t=e.char;return Object(c.jsx)(A,{children:Object(c.jsx)("div",{onClick:function(){n(t)},className:"bg-gray-800 active:bg-gray-700 hover:bg-gray-600 rounded-full p-4 cursor-pointer w-20 h-20 flex flex-wrap content-center",children:Object(c.jsx)("span",{className:"w-full text-center",children:t})})})}function U(e){var n=e.name;return Object(c.jsxs)("div",{className:"text-white p-4 h-full",children:[n?Object(c.jsx)("div",{className:"pb-4 text-xl",children:n}):"",Object(c.jsx)("div",{className:"flex space-x-2",children:e.children})]})}var B=[{name:"Home",component:function(){return Object(c.jsx)(U,{name:"Home"})}},{name:"Join Desk",component:function(){var e=Object(a.useState)(""),n=Object(d.a)(e,2),t=n[0],o=n[1];function s(e){4===t.length?o(e):o(t+e)}return Object(c.jsx)(U,{name:"Join Desk",children:Object(c.jsxs)("div",{className:"flex flex-wrap w-full content-center",children:[Object(c.jsx)("div",{className:"text-9xl w-1/2 flex flex-wrap content-center justify-center",children:t}),Object(c.jsxs)("div",{className:"p-2 rounded space-y-4 text-2xl",children:[Object(c.jsxs)("div",{className:"flex space-x-4",children:[Object(c.jsx)(L,{handleClick:s,char:"A"}),Object(c.jsx)(L,{handleClick:s,char:"B"}),Object(c.jsx)(L,{handleClick:s,char:"C"})]}),Object(c.jsxs)("div",{className:"flex space-x-4",children:[Object(c.jsx)(L,{handleClick:s,char:"D"}),Object(c.jsx)(L,{handleClick:s,char:"E"}),Object(c.jsx)(L,{handleClick:s,char:"F"})]}),Object(c.jsxs)("div",{className:"flex space-x-4",children:[Object(c.jsx)(L,{handleClick:s,char:"G"}),Object(c.jsx)(L,{handleClick:s,char:"H"}),Object(c.jsx)(L,{handleClick:s,char:"I"})]}),Object(c.jsx)("div",{className:"flex flex-wrap w-full justify-around",children:Object(c.jsx)(L,{handleClick:function(){t.length>0&&o(t.slice(0,t.length-1))},char:"<"})})]})]})})}},{name:"Contacts",component:function(){return Object(c.jsx)(U,{name:"Contacts"})}},{name:"Settings",component:function(){var e="bg-gray-800 active:bg-gray-700 hover:bg-gray-600 rounded w-full p-4 cursor-pointer";return Object(c.jsxs)(U,{name:"Settings",children:[Object(c.jsx)("div",{className:e,children:"thing"}),Object(c.jsx)("div",{className:e,children:"thing"})]})}}];var V=function(){var e=Object(a.useState)(0),n=Object(d.a)(e,2),t=n[0],o=n[1],s=B[t].component;return Object(c.jsxs)("div",{className:"flex text-lg text-gray-500 h-full",children:[Object(c.jsxs)("div",{className:"w-4/12 bg-black h-full overflow-hidden",children:[Object(c.jsx)(P,{children:"Menu"}),Object(c.jsx)(I,{children:B.map((function(e,n){return Object(c.jsx)(J,{handleClick:function(){o(n)},selected:t===n,children:e.name},e.name)}))})]}),Object(c.jsx)("div",{className:"w-full",children:Object(c.jsx)(s,{})})]})};function H(){console.log("Boot");var e=Object(l.g)(),n=function(e){return function(n){var t=JSON.parse(n.data);if("nav"===t.type)switch(t.command){case"push":console.log("command: nav "+t.path),e.push(t.path);break;default:console.log("command: not handled (navListeners) "+JSON.stringify(t))}}}(e);return null!=window.vuplex?(console.log("bonsai: vuplex is not null -> navListeners"),window.vuplex.addEventListener("message",n)):(console.log("bonsai: vuplex is null"),window.addEventListener("vuplexready",(function(e){console.log("bonsai: vuplexready -> navListeners"),window.vuplex.addEventListener("message",n)}))),Object(c.jsxs)("div",{children:["Boot",Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsx)(r.a,{to:"/youtube_test/qEfPBt9dU60/19.02890180001912?x=480&y=360",children:"youtube_test video"})}),Object(c.jsx)("li",{children:Object(c.jsx)(r.a,{to:"/spring",children:"spring"})}),Object(c.jsx)("li",{children:Object(c.jsx)(r.a,{to:"/twitch",children:"twitch"})}),Object(c.jsx)("li",{onClick:function(){e.push("/menu")},className:"text-white",children:"menu"}),Object(c.jsx)("li",{children:Object(c.jsx)(r.a,{to:"/menu",children:"menu"})})]})]})}function R(){return Object(c.jsx)("div",{children:"home"})}var _=function(){return console.log("App"),Object(c.jsx)(l.a,{children:Object(c.jsx)("div",{className:"bg-gray-900 h-screen text-green-400 select-none",children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/home",component:R}),Object(c.jsx)(l.b,{path:"/spring",component:k}),Object(c.jsx)(l.b,{path:"/twitch",component:S}),Object(c.jsx)(l.b,{path:"/menu",component:V}),Object(c.jsx)(l.b,{path:"/youtube/:id/:timeStamp",component:O}),Object(c.jsx)(l.b,{path:"/youtube_test/:id/:timeStamp",component:O}),Object(c.jsx)(l.b,{path:"/",component:H})]})})})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(_,{})}),document.getElementById("root"))},39:function(e,n){e.exports={postJson:function(e){console.log("bonsai post json: "+JSON.stringify(e)),null!=window.vuplex&&window.vuplex.postMessage(e)}}},70:function(e,n,t){}},[[104,1,2]]]);
//# sourceMappingURL=main.653d1ad9.chunk.js.map